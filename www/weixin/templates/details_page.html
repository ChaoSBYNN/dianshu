<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>{{title}}</title>
<link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
<style >
div.main{
  width:100%;
  height:500px;
}
div.clear {
  clear:both;
}
aside.img {
  padding:5px 5px 5px 0px;
  width:auto;
  height:100%;
  float:left;
}

aside.img > img{
  max-height:100%;
}

section.basic {
  padding;5px;
  height:100%;
  width:auto;
  float:left;
}

section.book > div {
  width: 100%;
  font-size:300%;
  padding:5px 8px 0px 8px;
}

section.book > .name{
  font-size:800%;
  color:blue;
}

section.book > .buy{
  font-size:600%;
  margin-top:8px;
  color:gray;
}

article.node {
  width:100%;
  height:auto;
}

article.node > div.title {
  margin:8px 2px 8px 2px;
  border-bottom: 5px solid #aaa;
}

article.node > div.title > div.name {
  border-radius:0.25em 0.25em 0em 0em;
  position: relative;
  top: 0px;
  font-size: 450%;
  background-color: #1c70ed;
  width: 30%;
  height: 15%;
  vertical-align: middle;
  text-align: center;
  color:white;
}

article.node > section.content {
  position: relative;
  padding: 8px;
  left: 0px;
  width: 100%;
  height: auto;
  top: 15px;
  font-size:400%;
}

.sprogress {
  position:relative;
  top: -68px;
  left:35%;
  width:50%;
  margin:0px;
  background-color: white;
  font-size:70%;
  font-weight: bolder;
  height:50px;
}


.sprogress-bar {
  background-color: #1c70ed;
}

.sbadge {
  position:relative;
  font-size:80%;
  top:-35px;
  left:-15px;
  border: 5px solid #ffffff;
}

.slabel{
  height:105px;
  display: inline-block;
}

.cmn_btn {
  border: 1px solid black;
  background: white;
  color: black;
  padding: 0px;
  margin:0px;
  cursor: pointer;
  font-size:80%;
}

div.spgs {
  width:100%;
  height:50px;
}

table.comment, table.comment tr, table.comment td {
  padding:0px;
  margin:0px;
  border:0;
}

table.comment td {
  vertical-align:middle;
}

table.comment img.userpic {
  max-width:100%;
  width:200px;
  height:200px;
}

table.comment div.username {
  font-size:100%;
  text-align:center;
  padding-top:8px;
}


table.comment article {
  padding-left:10px;
}

table.comment article header {

}

table.comment article section {

}

table.comment article footer {
  float:right;
}
</style>

</head>
<body>
<br/>+++++++++++++++++++++++图书+++++++++++++++++++++++++++++<br/>
<br/>-----------------------标签---------------------------<br/>
{% for tag in tags %}
<p>{{tag.name}}&nbsp;{{tag.count}}</p>
{% endfor %}
<br/>-----------------------排名---------------------------<br/>
{{rating}}
<br/>-----------------------标题---------------------------<br/>
{{title}}
<br/>-----------------------作者---------------------------<br/>
{{author.0}}
<br/>-----------------------价格---------------------------<br/>
{{price}}
<br/>-----------------------封面图片---------------------------<br/>
{{cover}}
<br/>-----------------------作者简介---------------------------<br/>
{{author_intro}}
<br/>-----------------------出版社---------------------------<br/>
{{publisher}}
<br/>-----------------------内容简介---------------------------<br/>
{{summary}}
<br/>-----------------------图书ID---------------------------<br/>
{{id}}
<br/>+++++++++++++++++++++++评论+++++++++++++++++++++++++++++<br/>
{{book_reviews}}
<br/>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br/>
<!-- cover -->
<div class="main">
<aside class="img">
<img class="img-responsive" src="http://img3.douban.com/lpic/s6384944.jpg" alt="封面不存在">
</aside>
<section class="basic book">
<div class="name">{{title}}</div>
<div class="author">作者: {{author.0}}</div>
<div class="author">出版社: {{publisher}}</div>
<div class="buy">
<span class="price">{{price}}</span>
<input type="button" class="cmn_btn" value="点击购买"/>
</div>
</section>
</div>
<div class="clear"></div>

<!-- tag cloud -->
<article class="node">
<div class="title">
<div class="name">div</div>
</div>
<section class="content">
{% for tag in tags %}
<span class="slabel"><span class="label label-default">{{tag.name}}</span><span class="badge sbadge">{{tag.count}}</span></span>
{% endfor %}
</section>
</article>

<!-- judge chart -->
<article class="node">
<div class="title">
<div class="name">div</div>
</div>
<section class="content">

<div style="spgs">
<span>类型1:</span><span>图标1</span>
<div class="progress sprogress">
  <div class="progress-bar sprogress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
  </div>
  <span>&nbsp;100%</span>
</div>
</div>

<div style="spgs">
<span>类型2:</span><span>图标2</span>
<div class="progress sprogress">
  <div class="progress-bar sprogress-bar" role="progressbar" aria-valuenow="72.54" aria-valuemin="0" aria-valuemax="100" style="width: 72.54%;">
  </div>
  <span>&nbsp;72.54%</span>
</div>
</div>

<div style="spgs">
<span>类型3:</span><span>图标3</span>
<div class="progress sprogress">
  <div class="progress-bar sprogress-bar" role="progressbar" aria-valuenow="19.28" aria-valuemin="0" aria-valuemax="100" style="width: 19.28%;">
  </div>
  <span>&nbsp;19.28%</span>
</div>
</div>

<div style="spgs">
<span>类型4:</span><span>图标4</span>
<div class="progress sprogress">
  <div class="progress-bar sprogress-bar" role="progressbar" aria-valuenow="7.25" aria-valuemin="0" aria-valuemax="100" style="width: 7.25%;">
  </div>
  <span>&nbsp;7.25%</span>
</div>
</div>

<div style="spgs">
<span>类型5:</span><span>图标5</span>
<div class="progress sprogress">
  <div class="progress-bar sprogress-bar" role="progressbar" aria-valuenow="0.85" aria-valuemin="0" aria-valuemax="100" style="width: 0.85%;">
  </div>
  <span>&nbsp;0.85%</span>
</div>
</div>

<div style="spgs">
<span>类型6:</span><span>图标6</span>
<div class="progress sprogress">
  <div class="progress-bar sprogress-bar" role="progressbar" aria-valuenow="0.08" aria-valuemin="0" aria-valuemax="100" style="width: 0.08%;">
  </div>
  <span>&nbsp;0.08%</span>
</div>
</div>
</section>
</article>


<!-- comment tab -->
<article class="node">
<div class="title">
<div class="name">div</div>
</div>
<section class="content">
<ul id="reviewsTab" class="nav nav-tabs">
  <li><a href="#douban" data-toggle="tab">豆瓣读书</a></li>
  <li><a href="#sina" data-toggle="tab">新浪微博</a></li>
  <li><a href="#tencent" data-toggle="tab">腾讯微博</a></li>
  <li><a href="#renren" data-toggle="tab">人人网</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane fade in active">
    <div class="list-group" id="douban-list-group">
    <!-- generate content via Ajax -->
    </div>
    </div>
    <div class="tab-pane fade" id="sina">
    <div class="list-group">
      <div class="list-group-item">1</div>
      <div class="list-group-item">2</div>
      <div class="list-group-item">3</div>
      <div class="list-group-item">4</div>
      <div class="list-group-item">5</div>
    </div>
    </div>
    <div class="tab-pane fade" id="tencent">
     <div class="list-group">
      <div class="list-group-item">1</div>
      <div class="list-group-item">2</div>
      <div class="list-group-item">3</div>
      <div class="list-group-item">4</div>
      <div class="list-group-item">5</div>
    </div>
    </div>
       <div class="tab-pane fade" id="renren">
     <div class="list-group">
      <div class="list-group-item">1</div>
      <div class="list-group-item">2</div>
      <div class="list-group-item">3</div>
      <div class="list-group-item">4</div>
      <div class="list-group-item">5</div>
    </div>
    </div>
</div>
</section>
</article>
<p id='test'><a href="http://115.28.3.240/weixin/get_book_reviews_by_offset/1">评论页面_偏移</a><p>
<p><a href="http://115.28.3.240/weixin/get_book_reviews_by_offset/">评论页面_无偏移</a><p>

<script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
<script>

var jq = $.noConflict();

jq(function () {
	jq('#reviewsTab a:first').tab('show');
  })

var url_nooffset = 'http://115.28.3.240/weixin/get_book_reviews_by_offset/';
var url_offset = url_nooffset + '1';

jq(document).ready(
		function(){
			get_reviews();
		}
		);

jq('#more_reviews').click(
		function(){
			var reviews = get_reviews_by_offset();
		}
		);

function get_reviews(){

	return exe_ajax(url_nooffset);

}

function get_reviews_by_offset(){
	
	return exe_ajax(url_offset);

}

function exe_ajax(url){
		   
	jq.ajax({
	    url:url,
	    dataType:"html",
 	    success:function(data){
	    	jq('#douban-list-group').append(data);
	    },
        error:function(XHRObj,msg,e){
	    	//error_msg = '<p class="error">' +　msg + ": " +　e + '</p>'
	    	error_msg = '<p class="error">' + '没有找到相关评论~' + '</p>';
	    	jq('#douban-list-group').append(error_msg);
	    } 
	});

}

</script>
</body>
</html>